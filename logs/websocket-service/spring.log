14:44:01.130-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.zch.WebsocketApplication             : The following 1 profile is active: "local"
14:44:01.611-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:44:01.613-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:44:01.644-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
14:44:01.811-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=e146bfa5-a5ec-36b0-a4a2-d75ee49ce19d
14:44:02.140-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8091 (http)
14:44:02.151-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:44:02.151-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]
14:44:02.219-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:44:02.219-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1080 ms
14:44:02.392-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
14:44:02.892-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.alibaba.nacos.client.naming          : initializer namespace from System Property :null
14:44:02.892-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.alibaba.nacos.client.naming          : initializer namespace from System Environment :null
14:44:02.893-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.alibaba.nacos.client.naming          : initializer namespace from System Property :null
14:44:02.925-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [           main] c.z.common.redis.config.RedissonConfig   : 尝试初始化RedissonClient
14:44:03.009-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] org.redisson.Version                     : Redisson 3.24.3
14:44:03.103-[CaiHua-Mac.local][sys]-- INFO 24469 --- [isson-netty-2-5] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 127.0.0.1/127.0.0.1:6379
14:44:03.159-[CaiHua-Mac.local][sys]-- INFO 24469 --- [sson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 127.0.0.1/127.0.0.1:6379
14:44:04.388-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
14:44:04.470-[CaiHua-Mac.local][sys]-- WARN 24469 --- [           main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
14:44:04.473-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
14:44:04.552-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8091 (http) with context path ''
14:44:04.554-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.alibaba.nacos.client.naming          : [BEAT] adding beat: BeatInfo{port=8091, ip='127.0.0.1', weight=1.0, serviceName='DEFAULT_GROUP@@websocket-service', cluster='DEFAULT', metadata={preserved.register.source=SPRING_CLOUD}, scheduled=false, period=5000, stopped=false} to beat map.
14:44:04.554-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.alibaba.nacos.client.naming          : [REGISTER-SERVICE] 0b9a59a8-3e92-4637-81ec-4f43304c767b registering service DEFAULT_GROUP@@websocket-service with instance: Instance{instanceId='null', ip='127.0.0.1', port=8091, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={preserved.register.source=SPRING_CLOUD}}
14:44:04.560-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP websocket-service 127.0.0.1:8091 register finished
14:44:05.559-[CaiHua-Mac.local][sys]-- INFO 24469 --- [.naming.updater] com.alibaba.nacos.client.naming          : new ips(1) service: DEFAULT_GROUP@@websocket-service@@DEFAULT -> [{"instanceId":"127.0.0.1#8091#DEFAULT#DEFAULT_GROUP@@websocket-service","ip":"127.0.0.1","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@websocket-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
14:44:05.564-[CaiHua-Mac.local][sys]-- INFO 24469 --- [.naming.updater] com.alibaba.nacos.client.naming          : current ips:(1) service: DEFAULT_GROUP@@websocket-service@@DEFAULT -> [{"instanceId":"127.0.0.1#8091#DEFAULT#DEFAULT_GROUP@@websocket-service","ip":"127.0.0.1","port":8091,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@websocket-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
14:44:05.564-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
14:44:05.576-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] com.zch.WebsocketApplication             : Started WebsocketApplication in 7.064 seconds (JVM running for 7.674)
14:44:05.584-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.n.client.config.impl.ClientWorker    : [fixed-127.0.0.1_8848] [subscribe] websocket-service.yaml+DEFAULT_GROUP
14:44:05.585-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.nacos.client.config.impl.CacheData   : [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=websocket-service.yaml, group=DEFAULT_GROUP, cnt=1
14:44:05.585-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : listening config: dataId=websocket-service.yaml, group=DEFAULT_GROUP
14:44:05.585-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.n.client.config.impl.ClientWorker    : [fixed-127.0.0.1_8848] [subscribe] websocket-service+DEFAULT_GROUP
14:44:05.585-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.nacos.client.config.impl.CacheData   : [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=websocket-service, group=DEFAULT_GROUP, cnt=1
14:44:05.586-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : listening config: dataId=websocket-service, group=DEFAULT_GROUP
14:44:05.586-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.n.client.config.impl.ClientWorker    : [fixed-127.0.0.1_8848] [subscribe] websocket-service-local.yaml+DEFAULT_GROUP
14:44:05.586-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.nacos.client.config.impl.CacheData   : [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=websocket-service-local.yaml, group=DEFAULT_GROUP, cnt=1
14:44:05.586-[CaiHua-Mac.local][sys]-- INFO 24469 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : listening config: dataId=websocket-service-local.yaml, group=DEFAULT_GROUP
14:44:05.847-[CaiHua-Mac.local][sys]-- INFO 24469 --- [on(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:44:05.848-[CaiHua-Mac.local][sys]-- INFO 24469 --- [on(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:44:05.849-[CaiHua-Mac.local][sys]-- INFO 24469 --- [on(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
14:44:05.852-[CaiHua-Mac.local][sys]-- INFO 24469 --- [on(3)-127.0.0.1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:44:06.104-[CaiHua-Mac.local][sys]-- INFO 24469 --- [on(3)-127.0.0.1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:44:26.207-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-1] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] ---> GET http://user-service/api/getUserById?id=1745747394693820416 HTTP/1.1
14:44:26.239-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-1] com.alibaba.nacos.client.naming          : new ips(1) service: DEFAULT_GROUP@@user-service -> [{"instanceId":"127.0.0.1#8084#DEFAULT#DEFAULT_GROUP@@user-service","ip":"127.0.0.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@user-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
14:44:26.239-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-1] com.alibaba.nacos.client.naming          : current ips:(1) service: DEFAULT_GROUP@@user-service -> [{"instanceId":"127.0.0.1#8084#DEFAULT#DEFAULT_GROUP@@user-service","ip":"127.0.0.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@user-service","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
14:44:26.275-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-1] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] <--- HTTP/1.1 200  (64ms)
14:44:26.288-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-1] com.zch.domain.WebSocket                 : 【websocket消息】有新的连接, 总数:1
14:44:34.020-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-2] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] ---> GET http://user-service/api/getUserById?id=1745747394693820416 HTTP/1.1
14:44:34.030-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-2] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] <--- HTTP/1.1 200  (9ms)
14:44:34.032-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-2] com.zch.domain.WebSocket                 : 【websocket消息】广播消息, message={"t":"message","v":{"content":"Hello","chat_id":1},"u":{"nick_name":"超级管理员"}}
14:44:34.055-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-2] com.zch.mapper.DanmuMapper.insert        : ==>  Preparing: INSERT INTO danmu ( content, course_id, video_id, user_id, duration ) VALUES ( ?, ?, ?, ?, ? )
14:44:34.069-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-2] com.zch.mapper.DanmuMapper.insert        : ==> Parameters: Hello(String), 1(Integer), 1(Integer), 1745747394693820416(Long), 0(BigDecimal)
14:44:34.080-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-2] com.zch.mapper.DanmuMapper.insert        : <==    Updates: 1
14:44:37.016-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-3] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] ---> GET http://user-service/api/getUserById?id=1745747394693820416 HTTP/1.1
14:44:37.028-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-3] c.z.a.feignClient.user.UserFeignClient   : [UserFeignClient#getUserById] <--- HTTP/1.1 200  (11ms)
14:44:37.029-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-3] com.zch.domain.WebSocket                 : 【websocket消息】广播消息, message={"t":"message","v":{"content":"阿斯蒂芬","chat_id":1},"u":{"nick_name":"超级管理员"}}
14:44:37.033-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-3] com.zch.mapper.DanmuMapper.insert        : ==>  Preparing: INSERT INTO danmu ( content, course_id, video_id, user_id, duration ) VALUES ( ?, ?, ?, ?, ? )
14:44:37.034-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-3] com.zch.mapper.DanmuMapper.insert        : ==> Parameters: 阿斯蒂芬(String), 1(Integer), 1(Integer), 1745747394693820416(Long), 0(BigDecimal)
14:44:37.038-[CaiHua-Mac.local][sys]--DEBUG 24469 --- [nio-8091-exec-3] com.zch.mapper.DanmuMapper.insert        : <==    Updates: 1
15:36:49.524-[CaiHua-Mac.local][sys]-- INFO 24469 --- [nio-8091-exec-5] com.zch.domain.WebSocket                 : 【websocket消息】连接断开, 总数:0
15:37:22.140-[CaiHua-Mac.local][sys]-- WARN 24469 --- [       Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:37:22.140-[CaiHua-Mac.local][sys]-- WARN 24469 --- [      Thread-12] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:37:22.141-[CaiHua-Mac.local][sys]-- WARN 24469 --- [      Thread-12] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:37:22.142-[CaiHua-Mac.local][sys]-- WARN 24469 --- [       Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:37:22.178-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:37:22.179-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : [BEAT] removing beat: DEFAULT_GROUP@@websocket-service:127.0.0.1:8091 from beat map.
15:37:22.179-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : [DEREGISTER-SERVICE] 0b9a59a8-3e92-4637-81ec-4f43304c767b deregistering service DEFAULT_GROUP@@websocket-service with instance: Instance{instanceId='null', ip='127.0.0.1', port=8091, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
15:37:22.183-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:37:22.183-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.beat.BeatReactor do shutdown begin
15:37:23.742-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.beat.BeatReactor do shutdown stop
15:37:23.742-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.core.HostReactor do shutdown begin
15:37:26.752-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.core.PushReceiver do shutdown begin
15:37:29.764-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.core.PushReceiver do shutdown stop
15:37:29.765-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
15:37:29.765-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
15:37:29.765-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.core.HostReactor do shutdown stop
15:37:29.765-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.net.NamingProxy do shutdown begin
15:37:29.766-[CaiHua-Mac.local][sys]-- WARN 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : [NamingHttpClientManager] Start destroying NacosRestTemplate
15:37:29.766-[CaiHua-Mac.local][sys]-- WARN 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : [NamingHttpClientManager] Destruction of the end
15:37:29.766-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] c.a.n.client.identify.CredentialWatcher  : [null] CredentialWatcher is stopped
15:37:29.766-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] c.a.n.client.identify.CredentialService  : [null] CredentialService is freed
15:37:29.766-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.alibaba.nacos.client.naming          : com.alibaba.nacos.client.naming.net.NamingProxy do shutdown stop
15:37:29.773-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
15:37:29.800-[CaiHua-Mac.local][sys]-- INFO 24469 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
